# Python设计模式

> 代码参考自Python设计模式一书

## Part1.创建型模式
```text
工厂方法和抽象工厂设计模式都可以用于以下几种场景:
a.想要追踪对象的创建
b.想要将对象的创建和使用解耦
c.想要优化应用的性能和资源占用
```
### 工厂方法
在工厂方法模式中,我们执行单个函数,传入一个参数(提供信息表明我们想要什么),但并不要求知道任何关于对象如何实现以及对象来着哪里的细节.
- 生活中的例子

制作塑料玩具的材料是一样的,但是不同的模具就行生成出不同的外形.比如有个工厂方法,输入是目标外形(小汽车或变形金刚)的名称,输出则是塑料外形.

- 软件中的例子

Django框架使用工厂方法模式来创建表单字段.Django的forms模块支持不同类字段(CharField,EmailField
)的创建和定制(max_length,required).

### 抽象工厂
抽象工厂设计模式是抽象方法的一种泛化,一个抽象工厂是逻辑上的一组工厂方法,其中每个工厂方法负责生产不同种类的对象.

- 生活中的例子

汽车制造行业使用了抽象工厂的思想,冲压不同的汽车模型的部件使用的机件是相同的,机件装配起来的模型随时可配置,且易于改变.

- 软件中的例子

django_factory是一个用于在测试中创建Django
模型的抽象工厂实现,可以用来为支持测试专有属性的模型创建实例.让测试代码的可读性更高,且避免共享不必要的代码.

- 应用

抽象工厂方法是工厂方法的泛化,所以它能提供相同的好处,让对象的创建更容易追踪,将对象创建与使用解耦,提供优化内存占用和应用性能的潜力.
何时使用工厂方法,何时用抽象工厂方法? 通常一开始使用工厂方法,因为它更简单,如果后来发现应用需要许多工厂方法,那么将创建一系列对象的过程合并在一起更合理,从而使用抽象工厂.

### 建造者模式

- 生活中的例子

快餐店中,即使存在多种汉堡和不同包装,准备一个汉堡和打包的流程是相同的,经典汉堡和麻辣汉堡的区别在于表现,而不是建造过程,指挥者是出纳员,将需要准备什么餐品的指令传递给工作人员,
建造者是工作人员中的个体,关注具体的顺序.

- 软件中的例子

django-widgy,django-query-builder

- 使用

建造者模式可以在工厂模式不适用的场景中使用,以下几种情况下,建造者是更好的选择:
想要创建一个复杂对象,对象由多个部分构成,并且对象创建经历多个不同的步骤,这些步骤也许还需遵从特定的顺序,
要求一个对象有不同的表现,并希望将对象的构造与表现解耦.
想要在某个时间点创建对象,但在稍后的时间点访问.

### 原型模式

原型模式帮助我们创建对象的克隆,最简单的形式就是一个clone函数,接收一个对象作为参数,返回输入对象的一个副本.

- 生活中的例子

有丝分裂,细胞分裂的过程是生物克隆的一个例子,在这个过程中,细胞核分列成2个细胞核,每个都有和原来细胞相同的染色体和DNA.

- 软件中的例子

很多Python应用都使用了原型模式,但几乎都不称之为原型模式,因为对象克隆是编程语言的一个内置特性.deepcopy.


## Part2.结构型模式

### 适配器模式

用来实现2个不兼容接口之间的兼容,我们可以编写一层代码用于进行新旧接口的通信,这个代码层就叫适配器.

- 生活中的例子

在没有网口的笔记本上插网线就需要一个适配器.

- 软件中的例子

Grok框架,Python第三方包Traits也用了适配器模式.

- 使用

在某个产品制造出来,需要对应新的需求时,如果希望它仍然有效,使用适配器是个不错的方式,不要求访问他方源码,不违法开闭原则


## Part3.行为型模式